<div class="dashboard-container">
    <!-- Loading State -->
    @if (isLoading) {
    <div class="loading-container">
        <div class="loading-content">
            <mat-icon class="loading-spinner">autorenew</mat-icon>
            <h3>Cargando Dashboard...</h3>
            <p>Por favor espera mientras cargamos tu información</p>
        </div>
    </div>
    }

    <!-- Error State -->
    @else if (hasError) {
    <div class="error-container">
        <div class="error-content">
            <mat-icon class="error-icon">error_outline</mat-icon>
            <h3>Error al cargar el dashboard</h3>
            <p>No se pudo cargar la información del dashboard</p>
            <button mat-raised-button color="primary" (click)="retryLoad()">
                <mat-icon>refresh</mat-icon>
                Reintentar
            </button>
        </div>
    </div>
    }

    <!-- Main Content -->
    @else {
    <!-- KPI Section -->
    <div class="kpi-section">
        @for (kpi of kpis; track kpi.title) {
        <mat-card class="kpi-card" [style.border-left-color]="kpi.color">
            <mat-card-content>
                <div class="kpi-header">
                    <div class="kpi-icon" [style.background-color]="kpi.color + '20'" [style.color]="kpi.color">
                        <mat-icon>{{ kpi.icon }}</mat-icon>
                    </div>
                    <div class="kpi-change" [class]="'change-' + kpi.changeType">
                        {{ kpi.change }}
                    </div>
                </div>
                <div class="kpi-content">
                    <h3 class="kpi-value">{{ kpi.value }}</h3>
                    <p class="kpi-title">{{ kpi.title }}</p>
                </div>
            </mat-card-content>
        </mat-card>
        }
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
        <!-- <div class="chart-row">
            <mat-card class="chart-card">
                <mat-card-header>
                    <mat-card-title>Cantidad por ordenes pago contra entrega</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div class="chart-container">
                        <canvas #lineChart></canvas>
                    </div>
                </mat-card-content>
            </mat-card>

            <mat-card class="chart-card">
                <mat-card-header>
                    <mat-card-title>Distribución por Categoría</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div class="chart-container">
                        <canvas #pieChart></canvas>
                    </div>
                    
                </mat-card-content>
            </mat-card>
        </div> -->
        
        <!-- Card de Pedidos por Día - Ahora está abajo como antes -->
        <!-- <div class="chart-row">
            <mat-card class="chart-card full-width">
                <mat-card-header>
                    <mat-card-title>Pedidos por Día de la Semana</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div class="chart-container">
                        <canvas #barChart></canvas>
                    </div>
                </mat-card-content>
            </mat-card>
        </div> -->
    </div>
    }
</div>